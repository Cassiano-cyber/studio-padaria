"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2376],{54662:function(t,e,a){a.d(e,{$N:function(){return y},Be:function(){return g},Vq:function(){return d},cN:function(){return m},cZ:function(){return f},fK:function(){return p},hg:function(){return c}});var o=a(57437),i=a(2265),r=a(32226),n=a(74732),s=a(49354);let d=r.fC,c=r.xz,l=r.h_;r.x8;let u=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,o.jsx)(r.aV,{ref:e,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i})});u.displayName=r.aV.displayName;let f=i.forwardRef((t,e)=>{let{className:a,children:i,...d}=t;return(0,o.jsxs)(l,{children:[(0,o.jsx)(u,{}),(0,o.jsxs)(r.VY,{ref:e,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[i,(0,o.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(n.Z,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.VY.displayName;let p=t=>{let{className:e,...a}=t;return(0,o.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a})};p.displayName="DialogHeader";let m=t=>{let{className:e,...a}=t;return(0,o.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a})};m.displayName="DialogFooter";let y=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,o.jsx)(r.Dx,{ref:e,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",a),...i})});y.displayName=r.Dx.displayName;let g=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,o.jsx)(r.dk,{ref:e,className:(0,s.cn)("text-sm text-muted-foreground",a),...i})});g.displayName=r.dk.displayName},85624:function(t,e,a){a.d(e,{CartProvider:function(){return f},j:function(){return p}});var o=a(57437),i=a(86763),r=a(2265),n=a(39630),s=a(49354),d=a(89506),c=a(69842),l=a(37374);let u=(0,r.createContext)(void 0),f=t=>{let{children:e}=t,[a,f]=(0,r.useState)([]),{toast:p}=(0,i.pm)(),{user:m,isQuickOrderFlow:y}=(0,n.a)(),[g,x]=(0,r.useState)(0),[b,h]=(0,r.useState)(0),[S,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(y){f([]);return}try{let t=localStorage.getItem("cartItems");t&&f(JSON.parse(t))}catch(t){console.error("Failed to parse cart from localStorage",t),localStorage.removeItem("cartItems")}},[y]),(0,r.useEffect)(()=>{y||localStorage.setItem("cartItems",JSON.stringify(a))},[a,y]);let N=(0,r.useCallback)(()=>{if(!m||!m.loyaltyPoints||m.loyaltyPoints<100)return;let t=Math.min(5*Math.floor(m.loyaltyPoints/100),a.reduce((t,e)=>t+("combo"===e.type?e.discountedPrice:e.price)*e.quantity,0)),e=100*Math.ceil(t/5);h(t),x(e),p({title:"Desconto aplicado!",description:"Voc\xea usou ".concat(e," pontos para um desconto de R$ ").concat(t.toFixed(2),".")})},[m,a,p]),T=(0,r.useCallback)(()=>{b>0&&(h(0),x(0),p({title:"Desconto removido."}))},[b,p]);(0,r.useEffect)(()=>{0===a.length&&T()},[a.length,T]),(0,r.useEffect)(()=>{if(!d.db)return;let t=(0,s.Wy)(),e=(0,c.JU)(d.db,"dailySpecial",t),a=(0,c.cf)(e,t=>{t.exists()&&t.data().approved?v(t.data()):v(null)});return()=>a()},[]);let k=(0,r.useCallback)(t=>{f(e=>e.find(e=>"product"===e.type&&e.id===t.id&&e.price>0)?e.map(e=>e.id===t.id?{...e,quantity:e.quantity+1}:e):[...e,{...t,type:"product",quantity:1}]),p({title:"Produto adicionado!",description:"".concat(t.name," foi adicionado ao seu carrinho.")})},[p]),C=(0,r.useCallback)((t,e)=>{e<=0||(f(a=>a.find(e=>"product"===e.type&&e.id===t.id)?a.map(a=>a.id===t.id?{...a,quantity:a.quantity+e}:a):[...a,{...t,type:"product",quantity:e}]),p({title:"Itens adicionados!",description:"".concat(e,"x ").concat(t.name," foram adicionados ao seu carrinho.")}))},[p]),E=(0,r.useCallback)(t=>{f(e=>e.find(e=>"combo"===e.type&&e.id===t.id)?e.map(e=>e.id===t.id?{...e,quantity:e.quantity+1}:e):[...e,{...t,type:"combo",quantity:1}]),p({title:"Combo adicionado!",description:"O ".concat(t.name," foi adicionado ao seu carrinho.")})},[p]),D=async t=>{if(!m||"collaborator"!==m.role||!d.db){p({variant:"destructive",title:"A\xe7\xe3o n\xe3o permitida."});return}if(a.some(t=>0===t.price)){p({title:"Benef\xedcio j\xe1 est\xe1 no carrinho!",description:"Voc\xea s\xf3 pode resgatar um item gr\xe1tis por pedido."});return}try{let e=(0,c.JU)(d.db,"users",m.uid),a=await (0,c.QT)(e);if(!a.exists())throw Error("Documento de usu\xe1rio n\xe3o encontrado.");let o=a.data(),i=(0,s.Wy)();if((null==o?void 0:o.lastClaimedWeeklySpecial)===i){p({title:"Benef\xedcio j\xe1 utilizado",description:"Voc\xea j\xe1 resgatou seu salgado gr\xe1tis esta semana."});return}f(e=>{let a={...t,type:"product",quantity:1,price:0};return[...e,a]}),p({title:"Benef\xedcio aplicado!",description:"".concat(t.name," adicionado ao seu pedido gratuitamente.")})}catch(t){console.error("Error checking for weekly special:",t),p({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel verificar o benef\xedcio. Verifique sua conex\xe3o ou tente mais tarde."})}},j=(0,r.useCallback)(t=>{let e=l.RB.find(t=>"999"===t.id);if(!e)return;let a={...e,id:"donation-999",name:"Doar um Salgado Surpresa",description:"Um ato de gentileza para o pr\xf3ximo da fila!",price:9.9,isMystery:!1,image:(null==t?void 0:t.imageUrl)||e.image};f(t=>{if(t.find(t=>t.id===a.id))return p({title:"Doa\xe7\xe3o j\xe1 est\xe1 no carrinho!",description:"Sua boa a\xe7\xe3o j\xe1 foi registrada. Obrigado!"}),t;{let e={...a,type:"product",quantity:1};return p({title:"Gentileza Adicionada! \uD83D\uDC9B",description:"Obrigado! Sua doa\xe7\xe3o ser\xe1 paga junto com seu pedido."}),[...t,e]}})},[p]),w=(0,r.useCallback)(t=>{f(e=>e.filter(e=>e.id!==t))},[]),I=(0,r.useCallback)((t,e)=>{f(a=>a.map(a=>a.id===t?{...a,quantity:e}:a).filter(t=>t.quantity>0))},[]),O=(0,r.useCallback)(()=>{f([])},[]),q=a.reduce((t,e)=>t+e.quantity,0),A=a.reduce((t,e)=>t+("combo"===e.type?e.discountedPrice:e.price)*e.quantity,0),_=(null==m?void 0:m.role)!=="collaborator"||y?0:.25*A,M=Math.max(0,A-_-b);return(0,o.jsx)(u.Provider,{value:{cartItems:a,addToCart:k,addComboToCart:E,addFreeItem:D,removeFromCart:w,updateQuantity:I,clearCart:O,cartCount:q,cartTotal:M,cartSubtotal:A,collaboratorDiscount:_,addMultipleToCart:C,redeemedPoints:g,pointsDiscount:b,applyPointsDiscount:N,removePointsDiscount:T,addDonation:j,dailySpecial:S},children:e})},p=()=>{let t=(0,r.useContext)(u);if(void 0===t)throw Error("useCart must be used within a CartProvider");return t}},86763:function(t,e,a){a.d(e,{pm:function(){return f}});var o=a(2265);let i=0,r=new Map,n=t=>{if(r.has(t))return;let e=setTimeout(()=>{r.delete(t),l({type:"REMOVE_TOAST",toastId:t})},1e6);r.set(t,e)},s=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:a}=e;return a?n(a):t.toasts.forEach(t=>{n(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===a||void 0===a?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},d=[],c={toasts:[]};function l(t){c=s(c,t),d.forEach(t=>{t(c)})}function u(t){let{...e}=t,a=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:t=>{t||o()}}}),{id:a,dismiss:o,update:t=>l({type:"UPDATE_TOAST",toast:{...t,id:a}})}}function f(){let[t,e]=o.useState(c);return o.useEffect(()=>(d.push(e),()=>{let t=d.indexOf(e);t>-1&&d.splice(t,1)}),[t]),{...t,toast:u,dismiss:t=>l({type:"DISMISS_TOAST",toastId:t})}}}}]);