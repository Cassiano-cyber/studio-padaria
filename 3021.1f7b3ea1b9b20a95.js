"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3021],{95829:function(e,r,t){t.d(r,{j:function(){return a}}),t(74590);var a=(0,t(58064).$)("9614337de25f0a4c8fda35a1011ee08d2fd7414f")},33021:function(e,r,t){t.r(r),t.d(r,{ChefOnScreen:function(){return v}});var a=t(57437),n=t(2265),s=t(89733),i=t(50745),o=t(37091),c=t(50099),u=t(74732),l=t(30685),d=t(95829),f=t(86763),h=t(79055),m=t(16463),p=t(98649);let g=[{id:0,message:"Bem-vindo! Sou eu, o Chef. Para uma pitada de hist\xf3ria, clique no livrinho em um dos salgados."},{id:1,message:"Para pedir, \xe9 f\xe1cil! Use o bot\xe3o 'Adicionar ao Pedido'. Seu carrinho est\xe1 sempre ali em cima, \xe0 direita."},{id:2,message:"Dica de amigo: crie uma conta no \xedcone de usu\xe1rio para ver seus pedidos antigos. \xc9 moleza!"},{id:3,message:"E se for dar uma festa, meu Assistente no canto esquerdo monta o card\xe1pio perfeito para voc\xea. Pode confiar!"}];function v(){var e;let[r,t]=(0,n.useState)(!1),[v,x]=(0,n.useState)(0),[b,w]=(0,n.useState)(!1),[y,C]=(0,n.useState)("Chef Crocante"),k=(0,n.useRef)(!1),j=(0,n.useRef)(!1),{toast:N}=(0,f.pm)(),S=(0,n.useRef)(null),E=(0,m.usePathname)(),[{isPlaying:z},{speak:T,cancel:Z}]=(0,p.h)(),A=(0,n.useRef)(!1),I=(0,n.useCallback)(()=>{S.current&&(S.current.pause(),S.current.src=""),Z(),w(!1)},[Z]),P=(0,n.useCallback)(()=>{k.current=!0,j.current=!1,t(!1),I(),sessionStorage.setItem("chefTutorialCompleted","true")},[I]),R=(0,n.useCallback)(async e=>{if(!j.current||k.current||e>=g.length){j.current=!1,I();return}x(e),w(!0);let r=g[e];try{let e=await (0,d.j)({text:r.message,cacheId:"chef_tutorial_step_v2_".concat(r.id)});if(!j.current||!S.current)return;if(e.audioDataUri)C("Chef Crocante"),S.current.src=e.audioDataUri,w(!1),await new Promise((e,r)=>{if(!S.current){r(Error("Audio element unmounted."));return}S.current.addEventListener("ended",()=>e(void 0),{once:!0}),S.current.addEventListener("error",e=>r(e),{once:!0}),S.current.play().catch(t=>{"AbortError"!==t.name?r(t):e(void 0)})});else throw Error("AI TTS returned empty data.")}catch(t){if(!j.current)return;console.warn("AI voice failed for step ".concat(e,", using fallback:"),t),C("Chef Rob\xf3tico"),w(!1),await new Promise(e=>{T(r.message,()=>e())})}j.current&&R(e+1)},[T,I]),_=(0,n.useCallback)(()=>{k.current||j.current||(j.current=!0,t(!0),R(0))},[R]),q=(0,n.useCallback)(()=>{I(),j.current=!1,k.current&&(k.current=!1,sessionStorage.removeItem("chefTutorialCompleted")),setTimeout(()=>{_()},100)},[_,I]);(0,n.useEffect)(()=>{let e;let r="true"===sessionStorage.getItem("chefTutorialCompleted");if("/"!==E||r||A.current)return;let t=()=>{A.current||(A.current=!0,_(),clearTimeout(a),null==e||e.disconnect())},a=setTimeout(t,6e3),n=document.getElementById("cardapio");return n&&(e=new IntersectionObserver(e=>{var r;(null===(r=e[0])||void 0===r?void 0:r.isIntersecting)&&t()},{threshold:.1})).observe(n),()=>{clearTimeout(a),null==e||e.disconnect()}},[E,_]);let L=(0,n.useCallback)(()=>{N({title:"O tour vai come\xe7ar!",description:"O Chef Crocante ir\xe1 gui\xe1-lo pelo site novamente."}),A.current=!1,r&&(I(),j.current=!1),setTimeout(()=>{_()},150)},[_,I,N,r]);if((0,n.useEffect)(()=>(window.addEventListener("resetChefTutorial",L),()=>window.removeEventListener("resetChefTutorial",L)),[L]),(0,n.useEffect)(()=>()=>{j.current=!1,I()},[I]),!r)return null;let M=null===(e=g[v])||void 0===e?void 0:e.message;return(0,a.jsxs)("div",{role:"status","aria-live":"polite",className:"fixed bottom-24 right-5 z-50 flex animate-in fade-in slide-in-from-bottom-5 items-end gap-2 transition-all duration-500 ease-out",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)(h.C,{variant:"Chef Crocante"===y?"default":"secondary",className:"mb-1 ml-4 shadow-sm self-start",children:y}),(0,a.jsxs)("div",{className:"relative mb-4 max-w-xs rounded-lg border bg-card p-4 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 pt-1 flex flex-col items-center gap-2",children:j.current?b?(0,a.jsx)(o.Z,{className:"h-5 w-5 text-primary animate-pulse","aria-label":"Carregando \xe1udio do chef"}):z||S.current&&!S.current.paused?(0,a.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:P,"aria-label":"Parar tour do Chef",children:(0,a.jsx)(o.Z,{className:"h-4 w-4 text-primary"})}):(0,a.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-6 w-6",disabled:!0,children:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground","aria-label":"\xc1udio em pausa"})}):(0,a.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:q,"aria-label":"Repetir tour do Chef",children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,a.jsx)("p",{className:"text-sm text-card-foreground pr-5 h-[5em] flex items-center justify-center text-center",children:b?"O Chef est\xe1 pensando...":M})]}),(0,a.jsx)(s.z,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-6 w-6",onClick:P,"aria-label":"Dispensar tour do Chef",children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"absolute -bottom-2 right-8 h-4 w-4 border-b border-r bg-card",style:{transform:"rotate(45deg)"},"aria-hidden":"true"})]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 rounded-full bg-primary p-3 shadow-lg",children:(0,a.jsx)(l.Z,{className:"h-10 w-10 text-primary-foreground"})}),(0,a.jsx)("audio",{ref:S,className:"hidden","aria-hidden":"true"})]})}},79055:function(e,r,t){t.d(r,{C:function(){return o}});var a=t(57437);t(2265);var n=t(13027),s=t(49354);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-600 text-white hover:bg-green-600/80"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(i({variant:t}),r),...n})}},98649:function(e,r,t){t.d(r,{h:function(){return n}});var a=t(2265);function n(){let[e,r]=(0,a.useState)(!1),t=(0,a.useRef)(null),n=(0,a.useCallback)(()=>{window.speechSynthesis&&(t.current&&(t.current.onend=null),window.speechSynthesis.cancel(),r(!1))},[]),s=(0,a.useCallback)((e,a)=>{if(!window.speechSynthesis){console.warn("Speech Synthesis not supported."),null==a||a();return}n(),setTimeout(()=>{let n=new SpeechSynthesisUtterance(e);n.lang="pt-BR",n.onstart=()=>{r(!0)},n.onend=()=>{r(!1),t.current=null,null==a||a()},n.onerror=e=>{"interrupted"!==e.error&&"canceled"!==e.error&&console.warn("SpeechSynthesis error:",e),r(!1),t.current=null},t.current=n,window.speechSynthesis.speak(n)},100)},[n]);return(0,a.useEffect)(()=>()=>{n()},[n]),[{isPlaying:e},{speak:s,cancel:n}]}},30685:function(e,r,t){t.d(r,{Z:function(){return a}});let a=(0,t(6497).Z)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},37091:function(e,r,t){t.d(r,{Z:function(){return a}});let a=(0,t(6497).Z)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},50099:function(e,r,t){t.d(r,{Z:function(){return a}});let a=(0,t(6497).Z)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])}}]);